<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ì…ë ¥</title>
<style>
  body { margin:0; font-family: system-ui, Roboto, 'Noto Sans KR', sans-serif; background:#fff; color:#111; }
  .wrap { max-width: 760px; margin: 0 auto; padding: 24px; }
  .card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; overflow:hidden; box-shadow:0 6px 16px rgba(0,0,0,.08); }
  .hero { display:flex; justify-content:center; align-items:center; background:#fff; }
  .hero img { width:100%; height:auto; object-fit:contain; display:block; margin:0 auto; max-width:100%; }
  .content { padding:24px; text-align:center; }
  .title { margin:0 0 8px; font-size:22px; font-weight:700; }
  .desc  { margin:0 16px 20px; line-height:1.6; color:#444; }
  .input-row { display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap; margin-top:8px; }
  .input-row input[type="text"], .input-row textarea {
    flex: 1 1 320px; max-width:520px; padding:12px 14px;
    border:1.5px solid #e5e7eb; border-radius:12px; font-size:16px;
  }
  .input-row textarea { min-height:120px; resize:vertical; }
  .btn {
    display:inline-block; padding:12px 24px; border-radius:12px; text-decoration:none; font-weight:700;
    background:#F5A623; color:#111; border:1.5px solid #000; box-shadow:0 1px 0 rgba(0,0,0,.35) inset; transition:.06s;
  }
  .btn:hover { transform:translateY(-1px); filter:brightness(1.03); }
  .btn:active { transform:translateY(0); filter:brightness(.98); }
  .error { color:#dc2626; margin-top:10px; font-weight:600; }
  .note  { color:#2563eb; margin-top:12px; font-weight:600; }
  .stack { display:flex; flex-direction:column; gap:12px; }
  .buttons { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app"><!-- ë·°ê°€ ì—¬ê¸° ë Œë”ë§ë©ë‹ˆë‹¤ --></div>
  </div>

<script>
  // ===== ë°ì´í„° (Flaskì˜ ë¦¬ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ) =====
  const SPECIAL_MESSAGES = [
    "ì¹­ì°¬ì€ ê°ì‚¬í•˜ì§€ë§Œ..ì € ì• ì¸ ìˆì–´ìš”ğŸ’–",
    "ë˜ ì¹­ì°¬ì´ë¼ë‹ˆ ë§ˆìŒì´ ë”°ëœ»í•´ì ¸ìš”.ğŸŒ¸ í•˜ì§€ë§Œ..ë” ì´ìƒì€ ê³¤ë€í•´ìš”ğŸ˜Š",
    "ê·¸ë§Œí•˜ì‹œë¼ë‹ˆê¹Œìš”! í•œë²ˆë§Œ ë”í•˜ë©´ ì € í™”ë‚´ìš”"
  ];
  const FAIL_MESSAGES = [
    "ì²˜ìŒì€ ê·¸ëŸ´ìˆ˜ ìˆì–´",
    "ë˜ í‹€ë ¸ì–´?",
    "ì„¸ë²ˆì§¸ ë„ì „ì´ë¼ë‹ˆ! í¬ê¸°í•˜ì§€ë§ˆ",
    "ì•„ì§ë„ ë„ì „ì¤‘? ëˆê¸° ì¸ì •",
    "íŒíŠ¸..ì¨ì£¼ì„¸ìš”..",
    "í˜¹ì‹œ..ë‚´ ì¡´ì¬ë¥¼ ëˆˆì¹˜ì±ˆê±°ì•¼?",
    " <br> <br> "
  ];

  // âœ… ì—¬ëŸ¬ ì •ë‹µ(ì†Œë¬¸ìë¡œ ê´€ë¦¬)
const ACCEPT_STEP1 = ["lipstick", "ë¦½ìŠ¤í‹±"];  // 1ë‹¨ê³„: ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ê¸°ëŠ” ì •ë‹µë“¤
const ACCEPT_STEP2 = ["#ff0000", "ff0000"];  // 2ë‹¨ê³„: ìµœì¢… í™”ë©´ìœ¼ë¡œ ë„˜ê¸°ëŠ” ì •ë‹µë“¤

  
  // ===== ìƒíƒœ (ë¸Œë¼ìš°ì € ìƒˆë¡œ ì—´ë©´ ì´ˆê¸°í™”ë¨) =====
  let special1Count = 0;
  let specialText = "";
  let wrong1 = 0;
  let wrong2 = 0;

  // ì…ë ¥ê°’ ë³´ì¡´ (ì˜¤ë‹µ/â€œì˜ˆë»ìš”â€ ì‹œ ì…ë ¥ì¹¸ ìœ ì§€)
  let step1Input = "";
  let step2Input = "";

  const $ = (sel) => document.querySelector(sel);
  const app = $("#app");

  // ===== ë·° ë Œë”ëŸ¬ë“¤ =====
  function renderStep1() {
    app.innerHTML = `
      <div class="hero">
        <img src="static/helliveyoung.jpg" alt="1ë‹¨ê³„ ì´ë¯¸ì§€">
      </div>
      <div class="content">
        <h1 class="title">Hellive-Youngì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
        <p class="desc">í•„ìš”í•˜ì‹œë©´~ì–¸ì œë“ ì§€~ ë§ì”€í•´~ì£¼~~ì„¸ìš”~~~</p>

        <form class="input-row" id="form1">
          <input type="text" name="answer" placeholder="ì˜ˆë»ìš”" autocomplete="off" required value="${escapeHtml(step1Input)}">
          <button class="btn" type="submit">ì œì¶œ</button>
        </form>

        ${specialText ? `<div class="note">${specialText}</div>` : ``}
        ${wrong1 > 0 ? `<div class="error">${FAIL_MESSAGES[Math.min(wrong1-1, FAIL_MESSAGES.length-1)]}</div>` : ``}
      </div>
    `;
    $("#form1").addEventListener("submit", handleSubmit1);
  }

  function renderStep2() {
    app.innerHTML = `
      <div class="hero">
        <img src="static/lipstick.jpg" alt="2ë‹¨ê³„ ì´ë¯¸ì§€">
      </div>
      <div class="content">
        <h1 class="title">ìŒ..ë¹¨ê°„ìƒ‰ ë¦½ìŠ¤í‹±ì€ ë§ì•„ì„œìš”.</h1>
        <p class="desc">ì •í™•íˆ ë¬´ìŠ¨ ìƒ‰ìƒì„ ë§ì”€í•˜ì‹œëŠ” ê±´ê°€ìš”?</p>

        <form class="input-row" id="form2">
          <input type="text" name="answer" placeholder="#??????" autocomplete="off" required value="${escapeHtml(step2Input)}">
          <button class="btn" type="submit">ì œì¶œ</button>
        </form>

        ${wrong2 > 0 ? `<div class="error">${FAIL_MESSAGES[Math.min(wrong2-1, FAIL_MESSAGES.length-1)]}</div>` : ``}
      </div>
    `;
    $("#form2").addEventListener("submit", handleSubmit2);
  }

  function renderFinal() {
    app.innerHTML = `
      <div class="content">
        <div class="stack">
          <div class="hero">
            <img src="static/discontinued.png" alt="ìµœì¢… ìƒë‹¨ ì´ë¯¸ì§€">
          </div>
          <div class="hero">
            <img src="static/aliveyoung.png" alt="ìµœì¢… í•˜ë‹¨ ì´ë¯¸ì§€">
          </div>
        </div>

        <h1 class="title" style="margin-top:16px;">ì•„ ê·¸ ë¦½ìŠ¤í‹±ì€ ë‹¨ì¢…ëœì§€ ì˜¤ë˜ëì–´ìš”.</h1>
        <p class="desc">ì´ê±´ 'BEFORE DEATH' ì¦‰, ì´ìŠ¹ì— ìˆëŠ” 'Alive-Young'ë§¤ì¥ì— ë°©ë¬¸í•˜ì‹œë©´ êµ¬ë§¤í•˜ì‹¤ìˆ˜ ìˆëŠ” ì œí’ˆì´ì—ìš”^^</p>

        <div class="buttons" style="margin-top:20px; justify-content:center;">
          <a class="btn" href="#/">ë„¤ ê°ì‚¬í•©ë‹ˆë‹¤!<br> -ì²˜ìŒìœ¼ë¡œ-</a>
        </div>
      </div>
    `;
  }

  function renderClose() {
    app.innerHTML = `
      <div class="content">
        <div class="hero" style="margin-top:16px;">
          <img src="static/whitedoorclosed.jpg" alt="ì§ì› ì´ë¯¸ì§€" style="max-width:80%; height:auto; border-radius:12px;">
        </div>
        <p class="desc" style="margin-top:16px;">ì—... ì•„ë¬´ë˜ë„ ì§ì›ì„ ê³¤ë€í•˜ê²Œ í•´ì„œ ì«’ê²¨ë‚œë“¯ í•˜ë‹¤.<br></p>
      </div>
    `;
    // ë¸Œë¼ìš°ì €ê°€ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì—´ë¦° ì°½ì´ ì•„ë‹ˆë©´ window.close()ê°€ ë§‰í ìˆ˜ ìˆìŒ
    try { window.close(); } catch(e) {}
  }

  // ===== í¼ í•¸ë“¤ëŸ¬ =====
  function handleSubmit1(e) {
    e.preventDefault();
    const v = e.target.answer.value.trim();
    step1Input = v; // ì…ë ¥ ìœ ì§€

    if (v === "ì˜ˆë»ìš”" || v === "ì˜ˆë¼ˆìš”") {
      special1Count += 1;
      if (special1Count >= 4) {
        location.hash = "#/close";
        return;
      }
      const idx = Math.min(special1Count - 1, SPECIAL_MESSAGES.length - 1);
      specialText = SPECIAL_MESSAGES[idx];
      renderStep1();  // ë¦¬ë‹¤ì´ë ‰íŠ¸ ì—†ì´ ë‹¤ì‹œ ë Œë”(ì…ë ¥ê°’ ë³´ì¡´)
      return;
    }

    if (v.toLowerCase() === "lipstick") {
      // ë‹¤ìŒ ë‹¨ê³„ë¡œ
      wrong1 = 0;
      step2Input = ""; // ë‹¤ìŒ ë‹¨ê³„ ì´ˆê¸°í™”
      location.hash = "#/step2";
      return;
    }

    // ì˜¤ë‹µ
    wrong1 += 1;
    renderStep1(); // ì…ë ¥ê°’ ìœ ì§€í•œ ì±„ ë‹¤ì‹œ ë Œë”
  }

  function handleSubmit2(e) {
  e.preventDefault();
  const v = e.target.answer.value.trim();
  step2Input = v; // ì…ë ¥ ìœ ì§€
  const low = v.toLowerCase();

  // âœ… ì •ë‹µ ë‹¨ì–´ê°€ ë¬¸ì¥ ì•ˆì— í¬í•¨ë˜ì–´ë„ í†µê³¼ (ì—¬ëŸ¬ ì •ë‹µ ì§€ì›)
  const isStep2Correct = ACCEPT_STEP2.some(ans => low.includes(ans));
  if (isStep2Correct) {
    wrong2 = 0;
    location.hash = "#/final";
    return;
  }

  // ì˜¤ë‹µ
  wrong2 += 1;
  renderStep2(); // ì…ë ¥ê°’ ìœ ì§€
}


  // ===== ë¼ìš°íŒ… (í•´ì‹œ ê¸°ë°˜) =====
  function router() {
    const hash = location.hash || "#/";
    switch (hash) {
      case "#/":
        // ìƒˆë¡œ ë“¤ì–´ì˜¬ ë•Œ â€œì„¸ì…˜â€ì²˜ëŸ¼ ëª¨ë‘ ì´ˆê¸°í™”
        special1Count = 0; specialText = ""; wrong1 = 0; step1Input = "";
        renderStep1();
        break;
      case "#/step2":
        renderStep2();
        break;
      case "#/final":
        renderFinal();
        break;
      case "#/close":
        renderClose();
        break;
      default:
        location.hash = "#/";
    }
  }

  window.addEventListener("hashchange", router);
  window.addEventListener("load", router);

  // XSS ë°©ì§€ìš© ê°„ë‹¨ escape
  function escapeHtml(s) {
    return String(s)
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#39;");
  }
</script>
</body>
</html>


